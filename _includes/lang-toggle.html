<!-- _includes/lang-toggle.html -->
{% comment %}
Works on GitHub Pages. Uses page.url and relative_url so baseurl is always respected.
If the current page isn't under /en/ or /ko/, links go to the language roots.
{% endcomment %}

{% assign url = page.url | default: "/" %}
{% assign segs = url | split: "/" %}
{% assign first = segs[1] | downcase %}
{% assign is_en = first == "en" %}
{% assign is_ko = first == "ko" %}

{% if is_en %}
  {% assign en_path = url %}
  {% assign ko_path = url | replace_first: "/en/", "/ko/" %}
{% elsif is_ko %}
  {% assign en_path = url | replace_first: "/ko/", "/en/" %}
  {% assign ko_path = url %}
{% else %}
  {% assign en_path = "/en/" %}
  {% assign ko_path = "/ko/" %}
{% endif %}

<nav class="lang-toggle" style="margin: .5rem 0 1rem;">
  <a href="{{ en_path | relative_url }}"
     class="{% if is_en or (is_en != true and is_ko != true) %}active{% endif %}">English</a>
  <span> | </span>
  <a href="{{ ko_path | relative_url }}"
     class="{% if is_ko %}active{% endif %}">한국어</a>
</nav>

<style>
  .lang-toggle a { text-decoration: none; }
  .lang-toggle a.active { font-weight: 700; text-decoration: underline; }
</style>
