---
layout: default
title: ğŸ“˜ Table Definitions
permalink: /en/web/proposals/ePortal-roles/table-definitions/
---

<link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">
{% include lang-toggle.html %}

<h1>ğŸ“˜ Table Definitions</h1>

<details>
  <summary><strong>ğŸ“‘ Table of Contents (click to expand)</strong></summary>
  <ul>
    <li><a href="#users"><code>users</code></a></li>
    <li><a href="#roles"><code>roles</code></a></li>
    <li><a href="#user_roles"><code>user_roles</code></a></li>
    <li><a href="#role_corporation"><code>role_corporation</code></a></li>
    <li><a href="#role_industry_segment"><code>role_industry_segment</code></a></li>
    <li><a href="#permissions"><code>permissions</code></a></li>
    <li><a href="#privileges"><code>privileges</code></a></li>
    <li><a href="#role_permissions"><code>role_permissions</code></a></li>
  </ul>
</details>

<hr />

<h2 id="users"><code>users</code></h2>
<p>Stores individual user accounts that can be assigned one or more roles. Users do not directly receive permissions or privileges â€” everything is inherited through assigned roles.</p>

<h3>Columns</h3>
<table>
  <thead>
    <tr><th>Column</th><th>Type</th><th>Description</th></tr>
  </thead>
  <tbody>
    <tr><td><code>id</code></td><td>INT</td><td>Primary key</td></tr>
    <tr><td><code>email</code></td><td>VARCHAR</td><td>Userâ€™s email address (unique)</td></tr>
    <tr><td><code>name</code></td><td>VARCHAR</td><td>Full name (optional)</td></tr>
  </tbody>
</table>

<h3>Relationships</h3>
<ul>
  <li>ğŸ”— <code>user_roles</code> â†’ assigns roles to this user</li>
</ul>

<h3>Notes</h3>
<ul>
  <li>Users can be assigned multiple roles at once</li>
  <li>Permissions and access levels are resolved entirely through role inheritance</li>
  <li>Optional metadata like <code>name</code>, <code>department</code>, or <code>employee_id</code> can be added</li>
</ul>

<hr />

<h2 id="roles"><code>roles</code></h2>
<p>Stores reusable role templates that define a set of permission/privilege pairs. Roles are not tied to a specific user, corporation, or segment by default â€” they gain context through the <code>user_roles</code>, <code>role_corporation</code>, and <code>role_industry_segment</code> tables.</p>

<h3>Columns</h3>
<table>
  <thead>
    <tr><th>Column</th><th>Type</th><th>Description</th></tr>
  </thead>
  <tbody>
    <tr><td><code>id</code></td><td>INT</td><td>Unique identifier for the role</td></tr>
    <tr><td><code>name</code></td><td>VARCHAR</td><td>Display name (e.g., â€œOrder â€“ WH Order Submissionâ€)</td></tr>
    <tr><td><code>description</code></td><td>TEXT</td><td>Optional explanation of the roleâ€™s purpose</td></tr>
  </tbody>
</table>

<h3>Relationships</h3>
<ul>
  <li>ğŸ”— <code>user_roles</code> â†’ assigns this role to users</li>
  <li>ğŸ”— <code>role_permissions</code> â†’ defines the permissions and privileges this role grants</li>
  <li>ğŸ”— <code>role_corporation</code> â†’ scopes this role to one or more corporations</li>
  <li>ğŸ”— <code>role_industry_segment</code> â†’ scopes this role to one or more industry segments</li>
</ul>

<h3>Notes</h3>
<ul>
  <li>Role names are descriptive and user-readable</li>
  <li>Roles can be reused across corporations and segments unless restricted by scoping</li>
</ul>

<hr />

<h2 id="user_roles"><code>user_roles</code></h2>
<p>Links users to their assigned roles.</p>

<h3>Columns</h3>
<table>
  <thead>
    <tr><th>Column</th><th>Type</th><th>Description</th></tr>
  </thead>
  <tbody>
    <tr><td><code>user_id</code></td><td>INT</td><td>FK to <code>users.id</code></td></tr>
    <tr><td><code>role_id</code></td><td>INT</td><td>FK to <code>roles.id</code></td></tr>
  </tbody>
</table>

<h3>Relationships</h3>
<ul>
  <li>ğŸ”— <code>users</code> â†’ defines who the role is assigned to</li>
  <li>ğŸ”— <code>roles</code> â†’ defines what permissions the user receives</li>
</ul>

<h3>Notes</h3>
<ul>
  <li>A user may have multiple roles (e.g., â€œOrder Submitterâ€ and â€œReport Viewerâ€)</li>
  <li>Roles are always assigned through this table</li>
  <li>Corporation/segment scoping is determined at the role level â€” not per user</li>
</ul>

<hr />

<h2 id="role_corporation"><code>role_corporation</code></h2>
<p>Scopes a role to one or more corporations (e.g., US, CA, MX).</p>

<h3>Columns</h3>
<table>
  <thead>
    <tr><th>Column</th><th>Type</th><th>Description</th></tr>
  </thead>
  <tbody>
    <tr><td><code>role_id</code></td><td>INT</td><td>FK to <code>roles.id</code></td></tr>
    <tr><td><code>corporation</code></td><td>VARCHAR</td><td>Country code or business unit</td></tr>
  </tbody>
</table>

<h3>Relationships</h3>
<ul>
  <li>ğŸ”— <code>roles</code> â†’ defines which role is scoped</li>
</ul>

<h3>Notes</h3>
<ul>
  <li>No entry means global access (no corp restriction)</li>
  <li>Used to enforce corporation-specific policies</li>
  <li>Codes should align with your canonical corp definitions</li>
</ul>

<hr />

<h2 id="role_industry_segment"><code>role_industry_segment</code></h2>
<p>Scopes a role to one or more industry segments.</p>

<h3>Columns</h3>
<table>
  <thead>
    <tr><th>Column</th><th>Type</th><th>Description</th></tr>
  </thead>
  <tbody>
    <tr><td><code>role_id</code></td><td>INT</td><td>FK to <code>roles.id</code></td></tr>
    <tr><td><code>industry_segment</code></td><td>VARCHAR</td><td>Segment label (e.g., â€œFleetâ€, â€œRetailâ€)</td></tr>
  </tbody>
</table>

<h3>Relationships</h3>
<ul>
  <li>ğŸ”— <code>roles</code> â†’ defines which role is scoped</li>
</ul>

<h3>Notes</h3>
<ul>
  <li>No segment means available to all</li>
  <li>Can assign to multiple segments with multiple rows</li>
  <li>Names should be standardized across the platform</li>
</ul>

<hr />

<h2 id="permissions"><code>permissions</code></h2>
<p>Represents a unique system action grouped by feature and action type.</p>

<h3>Columns</h3>
<table>
  <thead>
    <tr><th>Column</th><th>Type</th><th>Description</th></tr>
  </thead>
  <tbody>
    <tr><td><code>id</code></td><td>INT</td><td>Unique identifier for the permission</td></tr>
    <tr><td><code>name</code></td><td>VARCHAR</td><td>Canonical label</td></tr>
    <tr><td><code>feature</code></td><td>VARCHAR</td><td>Top-level category</td></tr>
    <tr><td><code>action</code></td><td>VARCHAR</td><td>Action type</td></tr>
  </tbody>
</table>

<h3>Relationships</h3>
<ul>
  <li>ğŸ”— <code>role_permissions</code> â†’ assigns this permission to specific roles</li>
</ul>

<h3>Notes</h3>
<ul>
  <li>Grouped and filterable in UI</li>
  <li>Name should remain stable across systems</li>
  <li>Reused across roles and corporations</li>
</ul>

<hr />

<h2 id="privileges"><code>privileges</code></h2>
<p>Defines the level of access a user has for a given permission.</p>

<h3>Columns</h3>
<table>
  <thead>
    <tr><th>Column</th><th>Type</th><th>Description</th></tr>
  </thead>
  <tbody>
    <tr><td><code>code</code></td><td>CHAR(1)</td><td>Unique code: A, S, U, or L</td></tr>
    <tr><td><code>label</code></td><td>VARCHAR</td><td>Full name: Access, Stock, etc.</td></tr>
  </tbody>
</table>

<h3>Relationships</h3>
<ul>
  <li>ğŸ”— <code>role_permissions</code> â†’ privileges linked to roles via permissions</li>
</ul>

<h3>Notes</h3>
<ul>
  <li>Current values:
    <ul>
      <li><code>A</code>: Access</li>
      <li><code>S</code>: Stock</li>
      <li><code>U</code>: Unit Price</li>
      <li><code>L</code>: List Price</li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="role_permissions"><code>role_permissions</code></h2>
<p>Joins roles to permissions and defines which specific privileges apply.</p>

<h3>Columns</h3>
<table>
  <thead>
    <tr><th>Column</th><th>Type</th><th>Description</th></tr>
  </thead>
  <tbody>
    <tr><td><code>role_id</code></td><td>INT</td><td>FK to <code>roles.id</code></td></tr>
    <tr><td><code>permission_id</code></td><td>INT</td><td>FK to <code>permissions.id</code></td></tr>
    <tr><td><code>privilege_code</code></td><td>CHAR(1)</td><td>FK to <code>privileges.code</code></td></tr>
  </tbody>
</table>

<h3>Relationships</h3>
<ul>
  <li>ğŸ”— <code>roles</code> â†’ defines who the permission applies to</li>
  <li>ğŸ”— <code>permissions</code> â†’ defines what action is allowed</li>
  <li>ğŸ”— <code>privileges</code> â†’ defines the access level</li>
</ul>

<h3>Notes</h3>
<ul>
  <li>Roles can map to the same permission multiple times with different privileges</li>
  <li>Enforces least privilege at the role level</li>
  <li>No corporate or segment scoping exists here â€” that comes from <code>role_corporation</code> and <code>role_industry_segment</code></li>
</ul>
