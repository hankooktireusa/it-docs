---
layout: default
title: ⚙️ CustomerPortal (CP) 및 WebOrder (WO) 배포 자동화
permalink: /ko/web/deployment-automation/
---

<link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">
{% include lang-toggle.html %}

<h1>⚙️ CustomerPortal (CP) 및 WebOrder (WO) 배포 자동화</h1>

<p>이 프로젝트는 PowerShell, WinSCP, PuTTY를 사용하여 <strong>CustomerPortal (CP)</strong>과 <strong>WebOrder (WO)</strong> 애플리케이션을 DEV/PROD 환경에 자동 배포합니다.</p>

<hr />

<h2>📥 스크립트 다운로드</h2>

<p>로컬에서 이 배포 자동화를 실행하려면:</p>
<ol>
  <li><a href="{{ '/en/web/deployment-automation/deployment-automation-scripts.zip' | relative_url }}">⬇️ deployment-automation-scripts.zip 다운로드</a></li>
  <li>다음 위치에 압축을 해제하세요:
    <pre><code>C:\scripts\deployment-automation</code></pre>
  </li>
  <li>PowerShell을 열고 실행:
    <pre><code class="language-powershell">.\main.ps1</code></pre>
  </li>
</ol>

<p>설정 및 구성 방법은 ZIP 번들 내부의 <strong>README.md</strong>를 참고하세요.</p>

<hr />

<h2>✨ 주요 기능</h2>
<ul>
  <li>🔄 환경 인지형 설정 전환 (datasource, SAP, WSDL)</li>
  <li>⚙️ 선택적 Maven 빌드 단계</li>
  <li>📦 WinSCP를 통한 안전한 WAR/ROOT 백업 및 전송</li>
  <li>🔐 PuTTY 및 WinSCP를 위한 동적 SSH 호스트 키 신뢰</li>
  <li>🖥️ PuTTY 자동화로 Tomcat 재시작 및 실시간 로그 모니터링</li>
  <li>🔁 동일 WAR로 PROD1 → PROD2 연속 배포</li>
  <li>⏪ 배포 후 점검, 롤백 및 정리 지원</li>
</ul>

<hr />

<h2>📁 스크립트 구조 (ZIP 포함)</h2>
<pre><code class="language-yaml">deployment-automation/
├── config.ps1                           # 공용 경로, 세션 이름, SSH 호스트 키
├── main.ps1                             # 전체 배포 자동화 진입점
├── README.md                            # 전체 사용 가이드 및 설정 안내
│
├── lib/
│   ├── git.ps1
│   ├── maven.ps1
│   ├── post-check-prompts.ps1
│   ├── post-check-and-rollback.ps1
│   ├── putty-automation.ps1
│   ├── putty.ps1
│   ├── rollback-deployment.ps1
│   ├── verify-war-file.ps1
│   ├── winscp-deploy.ps1
│   └── deploy-to-second-prod.ps1
│
└── switch-env-servers/
    ├── switch-datasource-server.ps1
    ├── switch-sap-properties.ps1
    └── switch-wsdl-info.ps1
</code></pre>

<hr />

<h2>🧭 배포 흐름 개요</h2>
<pre><code>          ┌───────────────┐
          │   앱 선택     │
          └───────┬───────┘
                  ▼
           ┌──────▼──────┐
           │  환경 선택  │
           └──────┬──────┘
                  ▼
      ┌───────────▼────────────┐
      │      Git Pull          │  ← PROD2 연속 배포 시 생략
      └───────────┬────────────┘
                  ▼
         ┌────────▼────────┐
         │  설정 전환      │
         └────────┬────────┘
                  ▼
        ┌─────────▼─────────┐
        │  Maven 빌드 실행  │
        └─────────┬─────────┘
                  ▼
        ┌─────────▼──────────┐
        │  WAR 파일 검증     │
        └─────────┬──────────┘
                  ▼
     ┌────────────▼─────────────┐
     │   PuTTY 세션 시작        │
     └────────────┬─────────────┘
                  ▼
   ┌──────────────▼──────────────┐
   │  WinSCP로 WAR 전송          │
   └──────────────┬──────────────┘
                  ▼
  ┌───────────────▼────────────────┐
  │ 기존 WAR 백업 후               │
  │ 새 WAR을 ROOT.war로 배포       │
  └───────────────┬────────────────┘
                  ▼
     ┌────────────▼─────────────┐
     │  PuTTY로 Tomcat 재시작   │
     └────────────┬─────────────┘
                  ▼
     ┌────────────▼────────────┐
     │ 로그 확인 + 롤백 여부   │
     └────────────┬────────────┘
                  ▼
         ┌────────▼────────┐
         │  PROD2 배포?    │
         └────────┬────────┘
                  ▼ 예
      (PuTTY 세션 → WAR 업로드 → 재시작 순서로 진행)
                  ▼
     ┌────────────▼──────────────┐
     │  설정 LOCAL로 복귀        │
     │  열린 PuTTY 세션 종료     │
     └───────────────────────────┘
</code></pre>

<hr />

<h2>👥 신규 개발자 안내</h2>
<p>이 도구는 CP와 WO 프로젝트의 전체 배포 흐름을 단계별로 안내합니다. 확인 절차와 안전한 롤백 기능을 포함하고 있어 처음 사용하는 경우에도 따라하기 쉽습니다.</p>
<p>첫 실행 시 동료와 함께 진행해 보세요!</p>
