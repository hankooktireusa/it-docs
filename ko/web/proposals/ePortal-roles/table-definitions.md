<link rel="stylesheet" href="/it-docs/assets/css/custom.css">

{% include lang-toggle.html %}

# 📘 테이블 정의

<details>
<summary><strong>📑 목차 (클릭하여 확장)</strong></summary>

- [`users`](#users)
- [`roles`](#roles)
- [`user_roles`](#user_roles)
- [`role_corporation`](#role_corporation)
- [`role_industry_segment`](#role-industry-segment)
- [`permissions`](#permissions)
- [`privileges`](#privileges)
- [`role_permissions`](#role_permissions)

</details>

---

## `users`

개별 사용자 계정을 저장하며, 각 사용자는 하나 이상의 역할(Role)을 가질 수 있습니다. 사용자는 직접 권한(Permission)이나 특권(Privilege)을 부여받지 않고, **역할을 통해서만** 이를 상속받습니다.

> ### 컬럼
> | 컬럼       | 타입     | 설명                                |
> |------------|----------|-------------------------------------|
> | `id`       | INT      | 기본 키                             |
> | `email`    | VARCHAR  | 사용자의 이메일 주소 (고유)         |
> | `name`     | VARCHAR  | 전체 이름 (선택 사항)               |
>
> ### 관계
> - 🔗 `user_roles` → 이 사용자에게 역할을 할당
>
> ### 비고
> - 사용자는 동시에 여러 역할을 가질 수 있음  
> - 권한 및 접근 수준은 전적으로 역할 상속을 통해 결정됨  
> - `name`, `department`, `employee_id` 등 선택적 메타데이터를 추가할 수 있음

---

## `roles`

권한/특권 쌍을 정의하는 재사용 가능한 역할 템플릿을 저장합니다. 기본적으로 역할은 특정 사용자, 법인, 또는 세그먼트에 직접 연결되지 않으며, `user_roles`, `role_corporation`, `role_industry_segment` 테이블을 통해 컨텍스트를 가집니다.

> ### 컬럼
> | 컬럼           | 타입      | 설명                                        |
> |----------------|-----------|---------------------------------------------|
> | `id`           | INT       | 역할의 고유 식별자                         |
> | `name`         | VARCHAR   | 표시 이름 (예: "Order – WH Order Submission") |
> | `description`  | TEXT      | 역할 목적에 대한 선택적 설명               |
>
> ### 관계
> - 🔗 `user_roles` → 이 역할을 사용자에게 할당  
> - 🔗 `role_permissions` → 이 역할이 부여하는 권한과 특권 정의  
> - 🔗 `role_corporation` → 하나 이상의 법인에 이 역할을 한정  
> - 🔗 `role_industry_segment` → 하나 이상의 산업 세그먼트에 이 역할을 한정
>
> ### 비고
> - 역할 이름은 설명적이며 사용자가 이해하기 쉽게 설계됨  
> - 범위 제한이 없는 한 역할은 여러 법인과 세그먼트에서 재사용 가능

---

## `user_roles`

사용자와 해당 사용자가 부여받은 역할을 연결합니다.

> ### 컬럼
> | 컬럼       | 타입     | 설명                  |
> |------------|----------|-----------------------|
> | `user_id`  | INT      | `users.id` 참조 (FK)  |
> | `role_id`  | INT      | `roles.id` 참조 (FK)  |
>
> ### 관계
> - 🔗 `users` → 역할이 부여된 사용자  
> - 🔗 `roles` → 사용자가 받는 권한 정의
>
> ### 비고
> - 사용자는 여러 역할을 가질 수 있음 (예: "Order Submitter" + "Report Viewer")  
> - 권한은 항상 이 테이블을 통해 부여되며, 직접 권한 부여는 하지 않음  
> - 법인/세그먼트 범위는 사용자 단위가 아닌 역할 단위에서 결정됨

---

## `role_corporation`

하나 이상의 법인(예: US, CA, MX)에 역할의 적용 범위를 한정합니다. 이를 통해 명확한 접근 제어 경계를 유지하면서, 역할을 여러 법인에서 재사용할 수 있습니다.

> ### 컬럼
> | 컬럼          | 타입     | 설명                                             |
> |---------------|----------|--------------------------------------------------|
> | `role_id`     | INT      | `roles.id` 참조 (FK)                             |
> | `corporation` | VARCHAR  | 국가 코드 또는 사업부 (예: 'US', 'CA')           |
>
> ### 관계
> - 🔗 `roles` → 범위가 적용되는 역할 정의
>
> ### 비고
> - 이 테이블에 항목이 없으면 해당 역할은 글로벌(법인 제한 없음)로 간주됨  
> - 법인별 접근 정책(예: 가격, 제품 라인)을 강제하는 데 사용  
> - 법인 코드는 시스템의 표준 법인 정의와 일치해야 함

---

## `role_industry_segment`

하나 이상의 산업 세그먼트(예: Fleet, Retail, Commercial)에 역할의 적용 범위를 한정합니다. 이를 통해 비즈니스 유형에 따라 더 세밀한 역할 제어가 가능합니다.

> ### 컬럼
> | 컬럼               | 타입     | 설명                                   |
> |--------------------|----------|----------------------------------------|
> | `role_id`          | INT      | `roles.id` 참조 (FK)                   |
> | `industry_segment` | VARCHAR  | 세그먼트 명칭 (예: 'Fleet', 'Retail')  |
>
> ### 관계
> - 🔗 `roles` → 범위가 적용되는 역할 정의
>
> ### 비고
> - 연결된 세그먼트가 없으면 모든 세그먼트에서 사용 가능  
> - 여러 세그먼트에 동일 역할을 부여하려면 행을 여러 개 추가  
> - 세그먼트 명칭은 플랫폼 전역에서 표준화되어야 함 (예: 룩업 테이블 참조)

---

## `permissions`

기능과 작업 유형으로 그룹화된 시스템의 고유한 동작을 나타냅니다. 권한은 사용자가 *무엇*을 할 수 있는지를 정의하며, 특권은 *얼마나* 할 수 있는지를 결정합니다.

> ### 컬럼
> | 컬럼       | 타입      | 설명                                         |
> |------------|-----------|----------------------------------------------|
> | `id`       | INT       | 권한의 고유 식별자                           |
> | `name`     | VARCHAR   | 표준 명칭 (예: "Order Submission")           |
> | `feature`  | VARCHAR   | 최상위 카테고리 (예: "Order", "Report")      |
> | `action`   | VARCHAR   | 작업 유형: "Create" 또는 "Status"            |
>
> ### 관계
> - 🔗 `role_permissions` → 이 권한을 특정 역할에 할당  
> - 🧭 각 권한의 특권은 역할별로 정의
>
> ### 비고
> - `feature`와 `action`은 UI에서 그룹화/필터링에 사용 가능  
> - `name`은 전역 변경이 없는 한 법인/세그먼트 간 동일하게 유지  
> - 권한은 법인이나 세그먼트에 직접 범위가 지정되지 않고, 여러 역할에서 재사용됨

---

## `privileges`

특정 권한에 대해 사용자가 가질 수 있는 접근 수준을 정의합니다. 권한이 *무엇*을 할 수 있는지 정한다면, 특권은 *얼마나* 할 수 있는지를 수정합니다.

> ### 컬럼
> | 컬럼       | 타입     | 설명                             |
> |------------|----------|----------------------------------|
> | `code`     | CHAR(1)  | 고유 코드: A, S, U, L            |
> | `label`    | VARCHAR  | 전체 명칭: Access, Stock 등      |
>
> ### 관계
> - 🔗 `role_permissions` → 특권은 권한 매핑을 통해 역할에 연결
>
> ### 비고
> - 현재 지원 값:  
>   - `A`: Access (기본 보기/사용)  
>   - `S`: Stock (재고 또는 가용성)  
>   - `U`: Unit Price (단가)  
>   - `L`: List Price (정가)  
> - 이 코드는 모든 권한에서 동일하며, 법인/세그먼트에 의해 범위가 제한되지 않음  
> - 필요 시 향후 새로운 특권 코드를 추가 가능

---

## `role_permissions`

역할과 권한을 연결하고, 어떤 특권이 적용되는지를 정의합니다. 역할이 *무엇*을 허용하고, *어느 정도까지* 허용하는지를 결정하는 핵심 테이블입니다.

> ### 컬럼
> | 컬럼             | 타입     | 설명                                         |
> |------------------|----------|----------------------------------------------|
> | `role_id`        | INT      | `roles.id` 참조 (FK)                         |
> | `permission_id`  | INT      | `permissions.id` 참조 (FK)                   |
> | `privilege_code` | CHAR(1)  | `privileges.code` 참조 (A, S, U, L)          |
>
> ### 관계
> - 🔗 `roles` → 권한이 적용되는 역할  
> - 🔗 `permissions` → 허용되는 동작  
> - 🔗 `privileges` → 해당 동작의 접근 수준
>
> ### 비고
> - 하나의 역할은 동일 권한에 대해 여러 특권을 가질 수 있음  
> - 이 테이블은 역할 단위에서 최소 권한 원칙을 적용  
> - 법인/세그먼트 범위는 여기서 적용되지 않으며, `role_corporation`과 `role_industry_segment`에서 결정됨
