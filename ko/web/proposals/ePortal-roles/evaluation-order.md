<link rel="stylesheet" href="/it-docs/assets/css/custom.css">

{% include lang-toggle.html %}

# 🧮 RBAC 시스템의 평가 순서

이 문서는 새로운 역할 기반 접근 제어(RBAC) 모델에서 사용자 권한이 어떻게 결정되는지를 설명합니다. 이 시스템은 광범위한 역할 할당에서 시작하여 정밀한 예외 처리까지 내려가며, 유연성과 최소 권한 원칙(Principle of Least Privilege)을 모두 충족합니다.

<details>
<summary>📑 목차</summary>

- [1. 🧱 역할 할당](#1-🧱-역할-할당)
- [2. 🧭 역할 범위 지정 (선택 사항)](#2-🧭-역할-범위-지정-선택-사항)
- [3. ➕ 역할 결합 및 병합](#3-➕-역할-결합-및-병합)
- [4. 🚫 제한 역할 (수정자)](#4-🚫-제한-역할-수정자)
- [5. 🛠️ 직접 권한 수준 재정의 (예외 케이스)](#5-🛠️-직접-권한-수준-재정의-예외-케이스)
- [🔁 요약 표](#️-요약-표)

</details>

---

## 1. 🧱 역할 할당

각 사용자는 하나 이상의 역할이 할당되며, 역할은 다음을 정의합니다:

- **권한** 집합 (예: *Order Submission*, *Warranty Status*)
- 각 권한에 대한 **권한 수준(Privileges)**:
  - `A` – Access
  - `S` – Stock
  - `U` – Unit Price
  - `L` – List Price

📚 이러한 역할은 [`role-definitions.md`](/it-docs/ko/web/proposals/ePortal-roles/role-definitions.md)에 정의되어 있으며, 기본 접근 모델의 기초가 됩니다.

---

## 2. 🧭 역할 범위 지정 (선택 사항)

역할의 효과를 좁히기 위해 범위를 지정할 수 있습니다:

- **법인** (예: US, CA, MX)
- **산업 세그먼트** (예: Retail, Fleet, Insurance)
- **기능 → 동작 → 채널** 조합

▶ 범위가 지정된 경우, 해당 역할은 **그 맥락 내에서만** 적용됩니다.

---

## 3. ➕ 역할 결합 및 병합

사용자가 여러 역할을 가진 경우:

- 모든 역할의 권한이 **병합**됩니다.
- 동일 권한에 대한 권한 수준은 **합집합**으로 통합됩니다.

📝 예시:  
한 역할이 *Order Submission*에 `A, S`를 부여하고 다른 역할이 `U`를 부여하면, 결과는 `A, S, U`입니다.

---

## 4. 🚫 제한 역할 (수정자)

일부 역할은 권한을 추가하는 것이 아니라 **제거**하는 역할을 합니다.

- 예: `No Pricing` 역할은 적용 가능한 모든 권한에서 `U`와 `L` 권한 수준을 제거합니다.
- 이러한 제한 역할은 역할 병합 **이후**에 적용됩니다.

🔒 `[SH-N]`와 같은 레거시 그룹 로직을 강제하는 데 사용됩니다.

---

## 5. 🛠️ 직접 권한 수준 재정의 (예외 케이스)

드문 예외의 경우:

- 권한 수준을 사용자 단위에서 직접 추가하거나 제거할 수 있습니다.
- 이러한 재정의는 모든 역할 및 제한이 적용된 **이후**에 적용됩니다.

⚠️ 이는 역할로 필요한 접근 패턴을 완전히 표현할 수 없을 때에만 제한적으로 사용해야 합니다.

---

## 🔁 요약 표

| 단계                      | 설명                                             | 예시                                       |
|---------------------------|--------------------------------------------------|---------------------------------------------|
| **기본 역할**             | 권한/권한 수준의 주요 출처                        | `Order – WH Order Submission (A, S, U)`     |
| **범위 지정 역할**         | 법인/세그먼트/채널로 제한된 역할                   | `Warranty – Create Warranty (CA only)`      |
| **역할 병합**              | 모든 역할을 결합하여 누적 접근 부여               | `Order + Status + Warranty`                 |
| **제한 역할**              | 기본 역할에서 부여된 권한 수준을 제거              | `No Pricing`은 `U`, `L` 제거                 |
| **직접 재정의**            | 사용자 단위의 최종 예외 조정                       | 특정 사용자에만 *Stock Report*에 `U` 추가   |
